const XPathValArr = [
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[1]/DIV[1]/INPUT[1]",
    "label": "Civil ID",
    "value": "270062401985"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[2]/DIV[1]/DIV[1]/INPUT[1]",
    "label": "Civil ID expiry",
    "value": "08/07/65"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[3]/DIV[1]/DIV[1]",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[3]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[4]/DIV[1]/DIV[1]",
    "value": "94",
    "label": "select-Nationality",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[4]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[5]/DIV[1]/DIV[1]/INPUT[1]",
    "label": "Date of Birth",
    "value": "04/06/74"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[6]/DIV[1]/DIV[1]",
    "value": "181",
    "label": "select-Prefix",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[6]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[7]/DIV[1]/INPUT[1]",
    "label": "First Name",
    "value": "Nate"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[8]/DIV[1]/INPUT[1]",
    "label": "First Name (Local)",
    "value": "Nate"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[9]/DIV[1]/INPUT[1]",
    "label": "Last Name",
    "value": "Rivers"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/DIV[10]/DIV[1]/INPUT[1]",
    "label": "Last Name (Local)",
    "value": "Rivers"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[1]/DIV[1]/INPUT[1]",
    "label": "Email ID",
    "value": "nate@rivers1.com"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[2]/DIV[1]/DIV[1]",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[2]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[3]/DIV[1]/INPUT[1]",
    "label": "Mobile Number",
    "value": "9123491234"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[4]/DIV[1]/DIV[1]",
    "value": "91",
    "label": "select-Code",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[4]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[2]/DIV[2]/DIV[1]/DIV[5]/DIV[1]/INPUT[1]",
    "label": "Whatsapp Number",
    "value": "32423"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[1]/DIV[1]/INPUT[1]",
    "label": "Block",
    "value": "11"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]",
    "label": "Street",
    "value": "22"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[3]/DIV[1]/INPUT[1]",
    "label": "House",
    "value": "33"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[4]/DIV[1]/INPUT[1]",
    "label": "Flat",
    "value": "44"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[5]/DIV[1]/DIV[1]",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[5]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[6]/DIV[1]/DIV[1]",
    "value": "685",
    "label": "select-State",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[6]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[7]/DIV[1]/DIV[1]",
    "value": "8254",
    "label": "select-District",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[7]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[8]/DIV[1]/DIV[1]",
    "value": "2",
    "label": "select-City",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[1]/DIV[1]/DIV[8]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[1]/DIV[1]/INPUT[1]",
    "label": "Block",
    "value": "11"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]",
    "label": "Street",
    "value": "22"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[3]/DIV[1]/INPUT[1]",
    "label": "House",
    "value": "33"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[4]/DIV[1]/INPUT[1]",
    "label": "Flat",
    "value": "44"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[5]/DIV[1]/DIV[1]",
    "value": "94",
    "label": "select-Country",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[5]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[6]/DIV[1]/DIV[1]",
    "value": "672",
    "label": "select-State",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[6]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[7]/DIV[1]/DIV[1]",
    "value": "8286",
    "label": "select-District",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[7]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[8]/DIV[1]/DIV[1]",
    "value": "1",
    "label": "select-City",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[3]/DIV[2]/SECTION[2]/DIV[1]/DIV[8]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[1]/DIV[1]/DIV[1]",
    "value": "187",
    "label": "select-Employment Type",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[2]/DIV[1]/DIV[1]",
    "value": "263",
    "label": "select-Profession",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[2]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "type": "textOrDate",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[3]/DIV[1]/INPUT[1]",
    "label": "Employer",
    "value": "HI"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[4]/DIV[1]/DIV[1]",
    "value": "41",
    "label": "select-Article",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[4]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[5]/DIV[1]/DIV[1]",
    "value": "14",
    "label": "select-Designation",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[5]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  },
  {
    "containerXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[6]/DIV[1]/DIV[1]",
    "value": "102",
    "label": "select-Income Range",
    "type": "select",
    "inputXPath": "/html/body/DIV[1]/DIV[1]/DIV[2]/DIV[2]/SECTION[2]/DIV[4]/DIV[2]/DIV[1]/DIV[6]/DIV[1]/DIV[1]/DIV[1]/DIV[1]/DIV[2]/DIV[1]/INPUT[1]"
  }
];

var webdriver = require("selenium-webdriver");
var { Builder, By, Key, until } = webdriver;
var chrome = require("selenium-webdriver/chrome");
var chromedriver = require("chromedriver");
chrome.setDefaultService(new chrome.ServiceBuilder(chromedriver.path).build());
require("geckodriver");
const serverUri = "http://localhost:5001/branch/app/customer/register";
var browser = new webdriver.Builder()
  .usingServer()
  .withCapabilities({ browserName: "chrome" })
  .build();

async function setSelectVal({ containerXPath, inputXPath, value }) {
  try {
    if (value) {
      let selectExt = await browser.findElement({ xpath: containerXPath });
      await selectExt.click();
      let selectInt = await browser.findElement({ xpath: inputXPath });
      await selectInt.sendKeys(value);
      await selectInt.sendKeys(Key.ENTER);
    }
  } catch (error) {
    console.error("error in setSelectVal: ", error);
  }
}

async function actions() {
  // giving the page a second to load
  await new Promise(resolve =>
    setTimeout(() => {
      resolve();
    }, 1000)
  );

  for (var i = 0; i < XPathValArr.length; i++) {
    let ele = XPathValArr[i];
    //select
    if (ele.type == "select") {
      await setSelectVal(ele);
    }

    //text or date
    if (ele.type == "textOrDate") {
      try {
        await browser
          .findElement({ xpath: ele.inputXPath })
          .sendKeys(ele.value || "");
      } catch (error) {
        console.error("error in textInput set: ", error);
      }
    }
  }

}

browser
  .get(serverUri)
  .then(actions)
  .catch(err => {
    console.error(err);
  });
